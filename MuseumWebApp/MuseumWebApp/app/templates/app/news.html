<!DOCTYPE html>
{% extends "app/layout.html" %}
{% block content %}

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>{{ title }}</title>
</head>

<body>
    <div style="padding: 0px 20px 10px 20px; max-width: 1200px; margin: auto;">
        <h1>News</h1>

        {% if user.is_superuser %}
        <form action="create_article/" method="get">
            {% csrf_token %}
            <button type="submit" style="margin-bottom:10px; padding: 10px 20px; border: none; border-radius: 5px; background-color: #007bff; color: white; font-size: 16px; cursor: pointer;">Add News</button>
        </form>
        {% endif %}

        <table style="width: 100%; border-collapse: collapse;">
            <tbody>
                {% for article in articles %}
                <tr style="border-bottom: 1px solid #ddd;">
                    <td style="padding: 10px; width: 150px; vertical-align: top;">
                        {% if article.image %}
                        <img src="{{ article.image.url }}" alt="{{ article.title }}" style="width: 100%; height: auto; object-fit: cover;">
                        {% endif %}
                    </td>
                    <td style="padding: 10px;">
                        <h3>{{ article.title }}</h3>
                        <p>{{ article.short_description }}</p>
                        <p style="color: #888;">Published: {{ article.published_at|date:"d/m/Y H:i:s" }}</p>
                        <a href="article_detail/{{ article.id }}" style="text-decoration: none; color: #007bff; padding: 5px; border: 1px solid #007bff; border-radius: 5px; background-color: #fff;">Read More</a>
                        {% if user.is_superuser %}
                        <a href="editArticle/{{ article.id }}" style="text-decoration: none; color: #ffc107; padding: 5px; border: 1px solid #ffc107; border-radius: 5px; background-color: #fff; margin-left: 5px;">Edit</a>
                        <a href="deleteArticle/{{ article.id }}" style="text-decoration: none; color: #dc3545; padding: 5px; border: 1px solid #dc3545; border-radius: 5px; background-color: #fff; margin-left: 5px;" onclick="return confirm('Are you sure you want to delete this article?');">Delete</a>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</body>
</html>
{% endblock %}